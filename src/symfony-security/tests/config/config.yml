framework:
    test: ~
    secret: 'test'
    session:
        storage_id: 'session.storage.mock_file'
    router:
        resource: "%kernel.root_dir%/../config/routing.php"
        strict_requirements: ~
    fragments:       ~
    http_method_override: true

services:
    _defaults:
        public: true

    Webauthn\Security\Bundle\Tests\Functional\UserProvider: ~
    Webauthn\Security\Bundle\Tests\Functional\CredentialRepository: ~

webauthn:
    credential_repository: 'Webauthn\Security\Bundle\Tests\Functional\CredentialRepository'

security:
    role_hierarchy:
        ROLE_GUEST:
        ROLE_USER:  ROLE_GUEST
        ROLE_ADMIN: ROLE_USER

    providers:
        default:
            id: 'Webauthn\Security\Bundle\Tests\Functional\UserProvider'

    firewalls:
        main:
            anonymous: ~
            webauthn:
                login_path: /login
                check_path: /login_check
            logout:
                path: /logout
                target: /

    access_control:
        - { path: ^/logout,  roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/login,  roles: IS_AUTHENTICATED_ANONYMOUSLY }
        - { path: ^/admin,  roles: 'ROLE_ADMIN' }
        - { path: ^/page,   roles: 'ROLE_USER' }
        - { path: ^/,       roles: IS_AUTHENTICATED_ANONYMOUSLY }
